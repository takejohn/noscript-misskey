---
import { misskeyApi } from '../../../common/api';
import { assertNonNull } from '../../../common/utils.js';
import ErrorPage from '../../../components/ErrorPage.astro';
import Timeline from '../../../components/Timeline.astro';
import Layout from '../../../layouts/Layout.astro';

const { host } = Astro.params;
assertNonNull(host);
const data = await misskeyApi(host, 'notes/local-timeline', {});
Astro.response.status = data.status;
---

<Layout>
    {
        data.ok ? (
            <Timeline host={host} notes={data.content} />
        ) : (
            <ErrorPage>{data.message}</ErrorPage>
        )
    }
</Layout>
